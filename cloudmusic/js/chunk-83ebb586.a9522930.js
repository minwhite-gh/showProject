(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-83ebb586"],{"1f66":function(t,a,e){t.exports=e.p+"img/3.ef83d3bc.png"},"39d3":function(t,a,e){"use strict";e.d(a,"a",(function(){return l}));e("c975"),e("fb6a"),e("b64b"),e("ac1f"),e("466d"),e("1276"),e("e7e5");var i=e("d399"),n=e("d4ec"),s=e("bee2"),o=e("bc3a"),r=e.n(o),c=function(){function t(){Object(n["a"])(this,t)}return Object(s["a"])(t,[{key:"getSongWordData",value:function(t,a,e){i["a"].loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),r()({method:"get",url:"/lyric",params:{id:e}}).then((function(e){if(Object.keys(e.data).indexOf("lrc")<0)if(Object.keys(e.data).indexOf("nolyric")>=0){var n=[{nolyric:!0,title:"纯音乐，请欣赏",isActive:!1}];t[a].songWordData=n}else{var s=[{nolyric:!0,title:"暂无歌词",isActive:!1}];t[a].songWordData=s}else if(""==e.data.lrc.lyric){var o=[{nolyric:!0,title:"纯音乐，请欣赏",isActive:!1}];t[a].songWordData=o}else for(var r="\\[.*\\]",c=e.data.lrc.lyric.split("\n"),l=[],u=0;u<c.length;u++){var f="",d="";c[u].indexOf(0)>-1?(d=c[u].match(r)[0],f=c[u].match(/[0-9]\d:[0-9]\d/)[0]):f="";var h=d.split("").length,m=c[u].slice(h);""!=m&&(l.push({time:f,title:m,isActive:!1}),t[a].songWordData=l)}i["a"].clear()})).catch((function(t){i["a"].clear()}))}},{key:"getSingerAlbum",value:function(t,a,e){i["a"].loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),r()({method:"get",url:"/artist/album",params:{id:e}}).then((function(e){i["a"].clear(),t[a].singerImg=e.data.artist.picUrl})).catch((function(t){i["a"].clear()}))}}]),t}(),l=new c},"466d":function(t,a,e){"use strict";var i=e("d784"),n=e("825a"),s=e("50c4"),o=e("1d80"),r=e("8aa5"),c=e("14c3");i("match",1,(function(t,a,e){return[function(a){var e=o(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,e):new RegExp(a)[t](String(e))},function(t){var i=e(a,t,this);if(i.done)return i.value;var o=n(t),l=String(this);if(!o.global)return c(o,l);var u=o.unicode;o.lastIndex=0;var f,d=[],h=0;while(null!==(f=c(o,l))){var m=String(f[0]);d[h]=m,""===m&&(o.lastIndex=r(l,s(o.lastIndex),u)),h++}return 0===h?null:d}]}))},"5fa5":function(t,a,e){t.exports=e.p+"img/4.a87b1702.png"},"775a":function(t,a,e){t.exports=e.p+"img/1.4593b03e.png"},"873d":function(t,a,e){"use strict";var i=e("bb92"),n=e.n(i);n.a},"881c":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{ref:"tuijianBox",staticClass:"tuijian"},[i("down-refresh",{on:{refresh:t.refresh}}),i("div",{staticClass:"top"},[i("van-search",{attrs:{"show-action":"",shape:"round",placeholder:"请输入搜索关键词","input-align":"center","left-icon":"",clearable:""},scopedSlots:t._u([{key:"action",fn:function(){return[t.personalimg?i("div",{staticClass:"personal"},[i("img",{attrs:{src:t.personalimg,alt:""}})]):i("div",{staticClass:"nologin",on:{click:t.goLogin}},[i("img",{attrs:{src:e("823b"),alt:""}})])]},proxy:!0},{key:"left",fn:function(){return[i("div",{staticClass:"mai"})]},proxy:!0},{key:"right-icon",fn:function(){return[i("van-icon",{attrs:{name:"search",size:"20","is-link":""},on:{click:t.getSearch}})]},proxy:!0}]),model:{value:t.searchvalue,callback:function(a){t.searchvalue=a},expression:"searchvalue"}}),i("van-popup",{staticClass:"popupBox",style:{height:"30%"},attrs:{round:"",position:"top"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[i("div",{staticClass:"searchPopupList"},t._l(t.searchData,(function(a,n){return i("div",{key:n,staticClass:"ListItem flexbetween"},[i("div",{staticClass:"listItem_left"},[i("span",{staticClass:"name"},[t._v(t._s(a.name))]),i("span",{staticClass:"heng"},[t._v("-")]),i("span",{staticClass:"singer"},[t._v(t._s(a.artNameData))])]),i("div",{staticClass:"listItem_right",on:{click:function(a){return t.clicksetUrl(n)}}},[i("img",{attrs:{src:e("cc2e"),alt:""}})])])})),0)])],1),i("div",{staticClass:"body"},[i("div",{staticClass:"swipebox"},[i("van-swipe",{staticClass:"my-swipe",attrs:{"indicator-color":"white",autoplay:3e3}},t._l(t.swipeData,(function(t,a){return i("van-swipe-item",{key:a},[i("img",{attrs:{src:t,alt:""}})])})),1)],1),i("div",{staticClass:"inletbox"},t._l(t.inletboxData,(function(a,e){return i("div",{key:e,staticClass:"inletitem"},[i("img",{attrs:{src:a.img,alt:""}}),i("p",[t._v(t._s(a.title))])])})),0),i("div",{staticClass:"tuijiansonglist"},[i("div",{staticClass:"songlistTop flexbetween"},[t._m(0),i("div",{staticClass:"flexbetween"},[i("span",[t._v("歌单广场")]),i("van-icon",{attrs:{name:"arrow",size:"14"}})],1)]),i("div",{staticClass:"songlistBody"},[i("van-tabs",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.songlistData,(function(a,n){return i("van-tab",{key:n,scopedSlots:t._u([{key:"title",fn:function(){return[i("div",{staticClass:"dian"})]},proxy:!0}],null,!0)},[i("div",{staticClass:"songshowbox",on:{touchstart:function(a){return t.touchstartShowBox(a,n)},touchmove:function(a){return t.touchmoveShowBox(a,n)},touchend:function(a){return t.touchendShowBox(a,n)}}},[i("div",{staticClass:"songbox"},t._l(a,(function(a,n){return i("div",{key:n,staticClass:"songitem",on:{click:function(e){return t.clicksongitem(a.id)}}},[i("img",{attrs:{src:a.picUrl,alt:""}}),i("div",{staticClass:"namebox"},[t._v(t._s(a.name))]),i("div",{staticClass:"iconbox"},[i("img",{attrs:{src:e("ad26"),alt:""}})])])})),0)])])})),1)],1)])])],1)},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("p",[t._v("推荐歌单")])])}],s=(e("a15b"),e("d81d"),e("fb6a"),e("b0c0"),e("ac1f"),e("1276"),e("5530")),o=(e("ddfc"),e("39d3")),r=e("2f62"),c=e("7c91"),l=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{ref:"refresh",staticClass:"refresh"},[i("div",{ref:"refreshBox",staticClass:"refreshBox"},[i("img",{attrs:{src:e("a33f"),alt:""}})])])},u=[],f={mounted:function(){this.touchStartBox(),this.touchMoveBox(),this.touchEndBox()},data:function(){return{startY:"",startX:"",moveDistance:0,moveState:0,duration:0}},methods:{touchStartBox:function(){var t=this;this.$parent.$el.addEventListener("touchstart",(function(a){t.moveState=0,t.moveDistance=0,t.startY=a.targetTouches[0].clientY,t.$refs.refresh.style.transitionDelay="0",t.$refs.refreshBox.style.transform="rotate(0deg)"}))},touchMoveBox:function(){var t=this,a=document.documentElement.scrollTop||document.body.scrollTop;if(!(a>0)){var e="";this.$parent.$el.addEventListener("touchmove",(function(a){if(e=a.targetTouches[0].clientY-t.startY,e>0)if(a.preventDefault(),t.moveDistance=Math.pow(e,.8),t.$refs.refresh.style.transform="translateY(".concat(t.moveDistance-30,"px)"),t.moveDistance>60){if(1===t.moveState)return;t.moveState=1,t.moveDistance=60}else{if(0===t.moveState)return;t.moveState=0,t.moveDistance=0}}))}},touchEndBox:function(){var t=this;this.$parent.$el.addEventListener("touchend",(function(a){t.moveDistance>=60?(t.moveState=2,t.moveDistance=60,t.$emit("refresh",(function(){t.moveState=0,t.moveDistance=-30}))):(t.moveState=0,t.moveDistance=-30,t.$refs.refresh.style.transform="translateY(".concat(t.moveDistance,"px)"))}))}},watch:{moveState:function(t){2===this.moveState?(this.$refs.refresh.style.transform="translateY(".concat(this.moveDistance,"px)"),this.$refs.refreshBox.style.transform="rotate(360deg)"):this.$refs.refresh.style.transform="translateY(".concat(this.moveDistance,"px)")}}},d=f,h=(e("873d"),e("2877")),m=Object(h["a"])(d,l,u,!1,null,"d45ecf70",null),g=m.exports,v=Object(r["a"])("MusicAudioStore"),p=v.mapState,b=v.mapActions,x={name:"tuijian",components:{DownRefresh:g},created:function(){this.getswipeData(),this.getsonglist(),this.getuserStatus(),this.clickSong&&this.setaudioxy(0)},computed:Object(s["a"])({},p(["detailbool","clickSong"])),watch:{clickSong:function(t){t&&this.setaudioxy(0)}},beforeRouteEnter:function(t,a,e){console.log("to :>> ",t),console.log("from :>> ",a),e()},data:function(){return{show:!1,searchvalue:"",searchData:[],songData:[],swipeData:[],personalimg:"",inletboxData:{everytujian:{title:"每日推荐",url:{name:"Everytujian"},img:e("775a")},songlist:{title:"歌单",url:{name:"Songlist"},img:e("8e30")},ranking:{title:"排行榜",url:{name:"Ranking"},img:e("1f66")},radiostation:{title:"电台",url:{name:"Radiostation"},img:e("5fa5")}},active:0,songlistData:[]}},methods:Object(s["a"])(Object(s["a"])({},b(["setaudioxy","setsongData","seticonNum","setClickSong"])),{},{refresh:function(t){var a=this;setTimeout((function(){a.getswipeData(),a.getsonglist(),t()}),1e3)},getswipeData:function(){var t=this;this.axios({method:"GET",url:"/banner",params:{type:2}}).then((function(a){t.swipeData=[],a.data.banners.slice(4,10).map((function(a){t.swipeData.push(a.pic)}))})).catch((function(t){}))},getsonglist:function(){var t=this,a=c["b"].getCookies();this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/personalized",params:{limit:20,cookie:a}}).then((function(a){t.$toast.clear();var e=a.data.result;t.songlistData=[];for(var i=0;i<4;i++)t.songlistData.push(e.slice(5*i,5*i+5))})).catch((function(a){t.$toast.clear()}))},getuserStatus:function(){var t=this,a=c["b"].getCookies();"null"!=a.split(";")[0]?this.axios({method:"GET",url:"/login/status",params:{cookie:a}}).then((function(a){t.personalimg=a.data.profile.avatarUrl,t.$toast({message:a.data.profile.nickname,icon:e("ad26")})})).catch((function(t){})):this.personalimg=null},goLogin:function(){this.$router.push({name:"Login"})},clicksongitem:function(t){this.$router.push({name:"Listdetails",query:{id:t}})},getSearch:function(){var t=this;""!=this.searchvalue&&(this.show=!0,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/search",params:{limit:20,keywords:this.searchvalue}}).then((function(a){if(t.$toast.clear(),a.status="200"){t.searchData=[];var e="";e=a.data.result.songs;var i="";e.map((function(t){for(var a=0;a<t.artists.length;a++)i+=t.artists[a].name+"/";i=i.slice(0,-1),t.artNameData=i})),t.searchData=e;var n=[];e.map((function(t){n.push(t.id)})),n=n.join(","),t.getsongDatabyId(n)}})).catch((function(t){})))},getsongDatabyId:function(t){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"get",url:"/song/detail",params:{ids:t}}).then((function(t){a.$toast.clear(),a.songData=[],t.data.songs.map((function(t){a.songData.push(t)})),a.songData.map((function(t,e){var i="";t.ar.map((function(t){i+=t.name+"/"})),t.songAr=i.slice(0,-1),t.palyurl="https://music.163.com/song/media/outer/url?id="+t.id+".mp3",t.isActive=!1,o["a"].getSingerAlbum(a.songData,e,t.ar[0].id);var n=Math.floor(t.dt/1e3/60%60),s=Math.floor(t.dt/1e3%60);t.totalTime=n+"."+s,o["a"].getSongWordData(a.songData,e,t.id)}))})).catch((function(t){a.$toast.clear()}))},clicksetUrl:function(t){this.show=!1,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.setsongData(this.songData[t]),this.setClickSong(!0),this.seticonNum(1)}})},y=x,D=Object(h["a"])(y,i,n,!1,null,"5fbc52f2",null);a["default"]=D.exports},"8e30":function(t,a,e){t.exports=e.p+"img/2.f26994d0.png"},a15b:function(t,a,e){"use strict";var i=e("23e7"),n=e("44ad"),s=e("fc6a"),o=e("a640"),r=[].join,c=n!=Object,l=o("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(s(this),void 0===t?",":t)}})},ad26:function(t,a,e){t.exports=e.p+"img/tj_a.96ebca67.png"},bb92:function(t,a,e){},c975:function(t,a,e){"use strict";var i=e("23e7"),n=e("4d64").indexOf,s=e("a640"),o=e("ae40"),r=[].indexOf,c=!!r&&1/[1].indexOf(1,-0)<0,l=s("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(t){return c?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},ddfc:function(t,a,e){}}]);
//# sourceMappingURL=chunk-83ebb586.a9522930.js.map