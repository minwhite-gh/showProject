(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7069ac8"],{2482:function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"video"},[s("div",{staticClass:"videoTop"},[s("van-search",{attrs:{"show-action":"",shape:"round",placeholder:"请输入搜索关键词","input-align":"center","left-icon":""},scopedSlots:t._u([{key:"action",fn:function(){return[t.personalimg?s("div",{staticClass:"personal"},[s("img",{attrs:{src:t.personalimg,alt:""}})]):s("div",{staticClass:"nologin",on:{click:t.goLogin}},[s("img",{attrs:{src:a("823b"),alt:""}})])]},proxy:!0},{key:"left",fn:function(){return[s("div",{staticClass:"icon"})]},proxy:!0}]),model:{value:t.searchvalue,callback:function(i){t.searchvalue=i},expression:"searchvalue"}})],1),s("div",{staticClass:"videoBody"},[s("van-tabs",{on:{click:t.clickTabs},model:{value:t.active,callback:function(i){t.active=i},expression:"active"}},t._l(t.tabData,(function(i,e){return s("van-tab",{key:e,attrs:{title:i.title}},[s("div",{staticClass:"videoList",attrs:{"data-index":e}},t._l(t.videoListData,(function(i,o){return s("div",{key:o,staticClass:"videoListItem"},[s("div",{staticClass:"videoBox"},[s("img",{directives:[{name:"show",rawName:"v-show",value:i.isShow,expression:"v.isShow"}],attrs:{src:i.cover,alt:""}}),s("div",{staticClass:"videoPosition"}),s("div",{staticClass:"showbox"},[s("img",{attrs:{src:i.isShow?t.videobtnUrl1:t.videobtnUrl2},on:{click:function(i){return t.clickshowbox(e,o)}}})])]),s("div",{staticClass:"titleAndImgBox flexbetween"},[s("div",{staticClass:"title"},[s("span",{staticClass:"one-ellipsis"},[t._v(t._s(i.name))])]),s("div",{staticClass:"imgBox"},[i.picUrl?s("img",{attrs:{src:i.picUrl,alt:""}}):s("p",[t._v("无")])])]),s("div",{staticClass:"commentBox flexbetween"},[s("div",{staticClass:"commentBoxLeft"},[s("div",{staticClass:"good"},[s("img",{attrs:{src:a("0d3a"),alt:""}}),s("p",{staticClass:"num"},[t._v(t._s(i.likedCount))])]),s("div",{staticClass:"talk"},[s("img",{attrs:{src:a("e0c9"),alt:""}}),s("p",{staticClass:"num"},[t._v(t._s(i.commentCount))])])]),s("div",{staticClass:"commentBoxRight"},[s("van-icon",{attrs:{name:"ellipsis",size:"20"}})],1)])])})),0)])})),1)],1),s("div",{staticClass:"videoFoot"})])},e=[],o=(a("4160"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("5530")),n=(a("2f24"),a("2f62")),c=a("7c91"),l=Object(n["a"])("MusicAudioStore"),r=l.mapState,d=l.mapActions,u={data:function(){return{showbox:"block",active:0,searchvalue:"",personalimg:"",videoListData:[],tabData:[{title:"内地"},{title:"港台"},{title:"欧美"},{title:"日本"},{title:"韩国"}],videobtnUrl1:a("f02b"),videobtnUrl2:a("8b9e")}},computed:Object(o["a"])({},r(["iconNum"])),created:function(){this.getuserStatus()},mounted:function(){this.getAllVideo(this.tabData[0].title)},methods:Object(o["a"])(Object(o["a"])({},d(["seticonNum"])),{},{goLogin:function(){this.$router.push({name:"Login"})},getuserStatus:function(){var t=this,i=c["b"].getCookies();"null"!=i.split(";")[0]?this.axios({method:"GET",url:"/login/status",params:{cookie:i}}).then((function(i){t.personalimg=i.data.profile.avatarUrl})).catch((function(t){})):this.personalimg=null},clickTabs:function(t,i){this.getAllVideo(i);var a=document.getElementsByClassName("videoPosition");a.forEach((function(t){t.innerHTML=""}));for(var s=0;s<this.videoListData.length;s++)this.videoListData[s].isShow=!0},getAllVideo:function(t){var i=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/mv/all",params:{limit:5,area:t}}).then((function(t){if(i.$toast.clear(),i.videoListData=[],200==t.status){var a=[];for(var s in t.data.data)a[s]||(a[s]={name:t.data.data[s].name,mvId:t.data.data[s].id,artistId:t.data.data[s].artistId,cover:t.data.data[s].cover,isShow:!0});for(var e=0;e<a.length;e++)i.getVideoInfo(a[e],a[e].mvId),i.getSongInfo(a[e],a[e].artistId),i.getVideoUrl(a[e],a[e].mvId);i.videoListData=a}})).catch((function(t){i.$toast.clear()}))},getVideoList:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/mv/first",params:{limit:5}}).then((function(i){t.$toast.clear()})).catch((function(i){t.$toast.clear()}))},getvideoData:function(t){var i=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/mv/detail",params:{mvid:t}}).then((function(t){i.$toast.clear()})).catch((function(t){i.$toast.clear()}))},getVideoInfo:function(t,i){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/mv/detail/info",params:{mvid:i}}).then((function(i){a.$toast.clear(),"200"==i.status&&(t.commentCount=i.data.commentCount,t.likedCount=i.data.likedCount,a.$forceUpdate())})).catch((function(t){a.$toast.clear()}))},getSongInfo:function(t,i){var a=this;0!=i&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/artist/album",params:{id:i}}).then((function(i){a.$toast.clear(),200==i.status&&(t.picUrl=i.data.artist.picUrl,a.$forceUpdate())})).catch((function(t){a.$toast.clear()})))},getVideoUrl:function(t,i){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/mv/url",params:{id:i,r:"720"}}).then((function(i){a.$toast.clear(),200==i.status&&(t.videoUrl=i.data.data.url,a.$forceUpdate())})).catch((function(t){a.$toast.clear()}))},clickshowbox:function(t,i){1==this.iconNum&&this.seticonNum(0);for(var a=document.getElementsByClassName("videoList"),s=document.getElementsByClassName("videoPosition"),e="",o=0;o<a.length;o++)a[o].getAttribute("data-index")==t&&(e=a[o].getElementsByClassName("videoPosition"));s.forEach((function(t){t.innerHTML=""}));var n=this.videoListData[i].videoUrl;e[i].innerHTML="<video src=".concat(n,"></video>"),this.videoListData[i].isShow?document.querySelector("video").play():document.querySelector("video").pause();for(var c=0;c<this.videoListData.length;c++)if(c!=i&&!this.videoListData[c].isShow){this.videoListData[c].isShow=!0;break}this.videoListData[i].isShow=!this.videoListData[i].isShow}})},v=u,h=a("2877"),m=Object(h["a"])(v,s,e,!1,null,"72178368",null);i["default"]=m.exports},"2f24":function(t,i,a){}}]);
//# sourceMappingURL=chunk-a7069ac8.ab1b2391.js.map