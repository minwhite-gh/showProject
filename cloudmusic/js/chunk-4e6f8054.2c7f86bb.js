(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e6f8054"],{"2f14":function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));e("99af"),e("fb6a"),e("a9e3");var i=e("d4ec"),n=e("bee2"),o=function(){function t(){Object(i["a"])(this,t)}return Object(n["a"])(t,[{key:"queryString",value:function(t){var a="";for(var e in t)a+="".concat(e,"=").concat(t[e],"&");return a.slice(0,-1)}},{key:"setGoS",value:function(t){var a=Number(t.slice(0,2)),e=Number(t.slice(3));return 60*a+e}}]),t}(),s=new o},"39d3":function(t,a,e){"use strict";e.d(a,"a",(function(){return c}));e("c975"),e("fb6a"),e("b64b"),e("ac1f"),e("466d"),e("1276"),e("e7e5");var i=e("d399"),n=e("d4ec"),o=e("bee2"),s=e("bc3a"),r=e.n(s),l=function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,[{key:"getSongWordData",value:function(t,a,e){i["a"].loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),r()({method:"get",url:"/lyric",params:{id:e}}).then((function(e){if(Object.keys(e.data).indexOf("lrc")<0)if(Object.keys(e.data).indexOf("nolyric")>=0){var n=[{nolyric:!0,title:"纯音乐，请欣赏",isActive:!1}];t[a].songWordData=n}else{var o=[{nolyric:!0,title:"暂无歌词",isActive:!1}];t[a].songWordData=o}else if(""==e.data.lrc.lyric){var s=[{nolyric:!0,title:"纯音乐，请欣赏",isActive:!1}];t[a].songWordData=s}else for(var r="\\[.*\\]",l=e.data.lrc.lyric.split("\n"),c=[],u=0;u<l.length;u++){var d="",h="";l[u].indexOf(0)>-1?(h=l[u].match(r)[0],d=l[u].match(/[0-9]\d:[0-9]\d/)[0]):d="";var f=h.split("").length,g=l[u].slice(f);""!=g&&(c.push({time:d,title:g,isActive:!1}),t[a].songWordData=c)}i["a"].clear()})).catch((function(t){i["a"].clear()}))}},{key:"getSingerAlbum",value:function(t,a,e){i["a"].loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),r()({method:"get",url:"/artist/album",params:{id:e}}).then((function(e){i["a"].clear(),t[a].singerImg=e.data.artist.picUrl})).catch((function(t){i["a"].clear()}))}}]),t}(),c=new l},"466d":function(t,a,e){"use strict";var i=e("d784"),n=e("825a"),o=e("50c4"),s=e("1d80"),r=e("8aa5"),l=e("14c3");i("match",1,(function(t,a,e){return[function(a){var e=s(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,e):new RegExp(a)[t](String(e))},function(t){var i=e(a,t,this);if(i.done)return i.value;var s=n(t),c=String(this);if(!s.global)return l(s,c);var u=s.unicode;s.lastIndex=0;var d,h=[],f=0;while(null!==(d=l(s,c))){var g=String(d[0]);h[f]=g,""===g&&(s.lastIndex=r(c,o(s.lastIndex),u)),f++}return 0===f?null:h}]}))},5899:function(t,a){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,a,e){var i=e("1d80"),n=e("5899"),o="["+n+"]",s=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),l=function(t){return function(a){var e=String(i(a));return 1&t&&(e=e.replace(s,"")),2&t&&(e=e.replace(r,"")),e}};t.exports={start:l(1),end:l(2),trim:l(3)}},7826:function(t,a,e){},"99af":function(t,a,e){"use strict";var i=e("23e7"),n=e("d039"),o=e("e8b5"),s=e("861d"),r=e("7b0b"),l=e("50c4"),c=e("8418"),u=e("65f0"),d=e("1dde"),h=e("b622"),f=e("2d00"),g=h("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",p=f>=51||!n((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),y=d("concat"),b=function(t){if(!s(t))return!1;var a=t[g];return void 0!==a?!!a:o(t)},W=!p||!y;i({target:"Array",proto:!0,forced:W},{concat:function(t){var a,e,i,n,o,s=r(this),d=u(s,0),h=0;for(a=-1,i=arguments.length;a<i;a++)if(o=-1===a?s:arguments[a],b(o)){if(n=l(o.length),h+n>m)throw TypeError(v);for(e=0;e<n;e++,h++)e in o&&c(d,h,o[e])}else{if(h>=m)throw TypeError(v);c(d,h++,o)}return d.length=h,d}})},a15b:function(t,a,e){"use strict";var i=e("23e7"),n=e("44ad"),o=e("fc6a"),s=e("a640"),r=[].join,l=n!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return r.call(o(this),void 0===t?",":t)}})},a9e3:function(t,a,e){"use strict";var i=e("83ab"),n=e("da84"),o=e("94ca"),s=e("6eeb"),r=e("5135"),l=e("c6b6"),c=e("7156"),u=e("c04e"),d=e("d039"),h=e("7c73"),f=e("241c").f,g=e("06cf").f,m=e("9bf2").f,v=e("58a8").trim,p="Number",y=n[p],b=y.prototype,W=l(h(b))==p,N=function(t){var a,e,i,n,o,s,r,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=v(c),a=c.charCodeAt(0),43===a||45===a){if(e=c.charCodeAt(2),88===e||120===e)return NaN}else if(48===a){switch(c.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+c}for(o=c.slice(2),s=o.length,r=0;r<s;r++)if(l=o.charCodeAt(r),l<48||l>n)return NaN;return parseInt(o,i)}return+c};if(o(p,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var x,w=function(t){var a=arguments.length<1?0:t,e=this;return e instanceof w&&(W?d((function(){b.valueOf.call(e)})):l(e)!=p)?c(new y(N(a)),e,w):N(a)},S=i?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;S.length>I;I++)r(y,x=S[I])&&!r(w,x)&&m(w,x,g(y,x));w.prototype=b,b.constructor=w,s(n,p,w)}},c975:function(t,a,e){"use strict";var i=e("23e7"),n=e("4d64").indexOf,o=e("a640"),s=e("ae40"),r=[].indexOf,l=!!r&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(t){return l?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},e224:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"hotword"},[e("div",{staticClass:"bgImgBox",style:{backgroundImage:"url("+t.showSongUrl+")"}}),e("div",{staticClass:"hotwordTop flexbetween"},[e("div",{staticClass:"hotwordTopLeft",on:{click:t.getBack}},[e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:"arrow-left",size:"20"}})],1),e("div",{staticClass:"text"},[t._v("热评墙")])]),e("div",{staticClass:"hotwordTopRight"},[e("span",[t._v(t._s(t.nowShowNum)+"/"+t._s(t.allNum))])])]),e("div",{staticClass:"hotwordBody"},[e("div",{staticClass:"hotWall",style:{width:t.hotWallWidth+"px"}},t._l(t.hotWallData,(function(a,i){return e("div",{key:i,staticClass:"hotWallItem",style:{width:t.itemWidth+"px"},on:{touchstart:function(a){return t.touchShotwordBody(a,i)},touchmove:function(a){return t.touchMhotwordBody(a,i)},touchend:function(a){return t.touchEhotwordBody(a,i)}}},[e("div",{staticClass:"arBox"},[e("img",{attrs:{src:a.userUrl}}),e("span",[t._v(t._s(a.nickName))])]),t._m(0,!0),e("div",{staticClass:"cententBox"},[e("span",[t._v(t._s(a.content))])]),e("div",{staticClass:"songBox"},[e("div",{staticClass:"songName",on:{click:function(a){return t.clicksetUrl(i)}}},[e("span",[t._v(t._s(a.songName))])]),t._m(1,!0)])])})),0)])])},n=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"douhao"},[i("img",{attrs:{src:e("5ad5"),alt:""}})])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"liveBox"},[i("img",{attrs:{src:e("3a3d"),alt:""}})])}],o=(e("c975"),e("a15b"),e("d81d"),e("fb6a"),e("b0c0"),e("ac1f"),e("466d"),e("1276"),e("5530")),s=(e("7826"),e("2f14"),e("2f62")),r=e("39d3"),l=Object(s["a"])("MusicAudioStore"),c=l.mapState,u=l.mapActions,d={name:"Hotword",data:function(){return{showSongUrl:"",hotWallData:[],songData:[],allHotWallData:[],itemWidth:"",hotWallWidth:"",startPagex:"",endPagex:"",touchBool:!1,hotWallLeftNum:"",nowShowNum:1,allNum:""}},computed:Object(o["a"])({},c(["hotWallPageNum"])),created:function(){this.setaudioxy(2),this.getHotWall(),this.setItemWidth()},methods:Object(o["a"])(Object(o["a"])({},u(["setMusicUrl","setaudioData","setaudioxy","seticonNum","setsongData","setHotWallPageNum","setSongListData","setClickSong"])),{},{getHotWall:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/comment/hotwall/list",params:{}}).then((function(a){if(t.$toast.clear(),a.status="200"){t.hotWallData=[];var e=[];t.allNum=a.data.data.length;for(var i=0;i<a.data.data.length;i++)e.push({nickName:a.data.data[i].simpleUserInfo.nickname,userUrl:a.data.data[i].simpleUserInfo.avatar,content:a.data.data[i].content,songName:a.data.data[i].simpleResourceInfo.song.name,songUrl:a.data.data[i].simpleResourceInfo.songCoverUrl,songId:a.data.data[i].simpleResourceInfo.songId});var n=[];e.map((function(a){t.hotWallData.push(a),n.push(a.songId)})),n=n.join(","),t.getsongDatabyId(n),t.setShowSongUrl(t.hotWallData[t.hotWallPageNum]);var o=document.querySelector(".hotWall");o.style.left=-t.itemWidth*t.hotWallPageNum+"px",t.nowShowNum=t.hotWallPageNum+1}})).catch((function(a){t.$toast.clear()}))},setShowSongUrl:function(t){this.showSongUrl=t.songUrl},getBack:function(){this.$router.go(-1),this.setHotWallPageNum(0)},getsongDatabyId:function(t){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"get",url:"/song/detail",params:{ids:t}}).then((function(t){a.$toast.clear(),a.songData=[],t.data.songs.map((function(t){a.songData.push(t)})),a.songData.map((function(t,e){var i="";t.ar.map((function(t){i+=t.name+"/"})),t.songAr=i.slice(0,-1),t.palyurl="https://music.163.com/song/media/outer/url?id="+t.id+".mp3",t.isActive=!1,r["a"].getSingerAlbum(a.songData,e,t.ar[0].id);var n=Math.floor(t.dt/1e3/60%60),o=Math.floor(t.dt/1e3%60);t.totalTime=n+"."+o,r["a"].getSongWordData(a.songData,e,t.id)}))})).catch((function(t){a.$toast.clear()}))},getSingerData:function(t,a){var e=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"get",url:"/lyric",params:{id:a}}).then((function(a){if(a.data.nolyric||""==a.data.lrc.lyric){var i=[{nolyric:!0,title:"纯音乐，请欣赏",isActive:!1}];e.songData[t].songWordData=i}else for(var n="\\[.*\\]",o=a.data.lrc.lyric.split("\n"),s=[],r=0;r<o.length;r++){var l=o[r].match(n)[0],c="";c=o[r].indexOf(0)>-1?o[r].match(/[0-9]\d:[0-9]\d/)[0]:"";var u=l.split("").length,d=o[r].slice(u);""!=d&&(s.push({time:c,title:d,isActive:!1}),e.songData[t].songWordData=s)}e.$toast.clear()})).catch((function(t){e.$toast.clear()}))},getSingerAlbum:function(t,a){var e=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"get",url:"/artist/album",params:{id:a}}).then((function(a){e.$toast.clear(),e.songData[t].singerImg=a.data.artist.picUrl})).catch((function(t){e.$toast.clear()}))},clicksetUrl:function(t){this.setClickSong(!0),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.setsongData(this.songData[t]),this.seticonNum(1),this.$router.push({name:"Songdetail"})},setItemWidth:function(){this.itemWidth=document.body.clientWidth},touchShotwordBody:function(t,a){this.startPagex="",this.startPagex=t.changedTouches[0].pageX,this.touchBool=!0;var e=document.querySelector(".hotWall");e.style.transitionDuration="0s",this.hotWallLeftNum=e.offsetLeft},touchMhotwordBody:function(t,a){var e=t.changedTouches[0].pageX,i=document.querySelector(".hotWall"),n="";if(e-this.startPagex>=0){if("0"==this.hotWallLeftNum)return;n=this.hotWallLeftNum+e-this.startPagex}else{if(a==this.hotWallData.length-1)return;n=this.hotWallLeftNum+e-this.startPagex}i.style.left=n+"px"},touchEhotwordBody:function(t,a){this.endPagex="",this.endPagex=t.changedTouches[0].pageX,this.touchBool=!1;var e=this.endPagex-this.startPagex,i=document.querySelector(".hotWall");if(i.style.transitionDuration="0.3s",Math.abs(e)<this.itemWidth/2)i.style.left=this.hotWallLeftNum+"px";else if(e<=-this.itemWidth/2){if(a==this.hotWallData.length-1)return;i.style.left=this.hotWallLeftNum-this.itemWidth+"px",this.showSongUrl=this.hotWallData[a+1].songUrl,this.setHotWallPageNum(a+1),this.nowShowNum=this.hotWallPageNum+1}else if(e>=this.itemWidth/2){if("0"==this.hotWallLeftNum)return;i.style.left=this.hotWallLeftNum+this.itemWidth+"px",this.showSongUrl=this.hotWallData[a-1].songUrl,this.setHotWallPageNum(a-1),this.nowShowNum=this.hotWallPageNum+1}}})},h=d,f=e("2877"),g=Object(f["a"])(h,i,n,!1,null,"faeb5ac4",null);a["default"]=g.exports}}]);
//# sourceMappingURL=chunk-4e6f8054.2c7f86bb.js.map