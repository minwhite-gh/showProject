(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b2fc290"],{"2f14":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("99af"),a("fb6a");var i=a("d4ec"),r=a("bee2"),n=function(){function t(){Object(i["a"])(this,t)}return Object(r["a"])(t,[{key:"queryString",value:function(t){var e="";for(var a in t)e+="".concat(a,"=").concat(t[a],"&");return e.slice(0,-1)}}]),t}(),o=new n},8418:function(t,e,a){"use strict";var i=a("c04e"),r=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var o=i(e);o in t?r.f(t,o,n(0,a)):t[o]=a}},"99af":function(t,e,a){"use strict";var i=a("23e7"),r=a("d039"),n=a("e8b5"),o=a("861d"),s=a("7b0b"),c=a("50c4"),d=a("8418"),l=a("65f0"),u=a("1dde"),f=a("b622"),p=a("2d00"),v=f("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",m=p>=51||!r((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),b=u("concat"),y=function(t){if(!o(t))return!1;var e=t[v];return void 0!==e?!!e:n(t)},x=!m||!b;i({target:"Array",proto:!0,forced:x},{concat:function(t){var e,a,i,r,n,o=s(this),u=l(o,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?o:arguments[e],y(n)){if(r=c(n.length),f+r>h)throw TypeError(g);for(a=0;a<r;a++,f++)a in n&&d(u,f,n[a])}else{if(f>=h)throw TypeError(g);d(u,f++,n)}return u.length=f,u}})},a434:function(t,e,a){"use strict";var i=a("23e7"),r=a("23cb"),n=a("a691"),o=a("50c4"),s=a("7b0b"),c=a("65f0"),d=a("8418"),l=a("1dde"),u=a("ae40"),f=l("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,h=Math.min,g=9007199254740991,m="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var a,i,l,u,f,p,b=s(this),y=o(b.length),x=r(t,y),C=arguments.length;if(0===C?a=i=0:1===C?(a=0,i=y-x):(a=C-2,i=h(v(n(e),0),y-x)),y+a-i>g)throw TypeError(m);for(l=c(b,i),u=0;u<i;u++)f=x+u,f in b&&d(l,u,b[f]);if(l.length=i,a<i){for(u=x;u<y-i;u++)f=u+i,p=u+a,f in b?b[p]=b[f]:delete b[p];for(u=y;u>y-i+a;u--)delete b[u-1]}else if(a>i)for(u=y-i;u>x;u--)f=u+i-1,p=u+a-1,f in b?b[p]=b[f]:delete b[p];for(u=0;u<a;u++)b[u+x]=arguments[u+2];return b.length=y-i+a,l}})},be7a:function(t,e,a){},bee2:function(t,e,a){"use strict";function i(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,a){return e&&i(t.prototype,e),a&&i(t,a),t}a.d(e,"a",(function(){return r}))},cf2a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("div",{staticClass:"bg"}),a("div",{staticClass:"order-top"},[a("van-nav-bar",{attrs:{title:"我的订单","left-text":"返回","left-arrow":""},on:{"click-left":t.goback}})],1),a("div",{staticClass:"orderbox"},[a("div",{staticClass:"order-body"},[a("van-tabs",{on:{change:t.toggleStatus},model:{value:t.activeindex,callback:function(e){t.activeindex=e},expression:"activeindex"}},t._l(t.titlelist,(function(e,i){return a("van-tab",{key:i,attrs:{title:e}},[t.allorderlist.length>0?a("div",t._l(t.allorderlist,(function(e,i,r){return a("div",{key:r,staticClass:"bodybox"},[a("div",{staticClass:"itembox"},[a("div",{staticClass:"itembox-top"},[a("div",{staticClass:"numbox"},[a("span",[t._v(t._s(e.orderId))])]),a("div",{staticClass:"iconText"},[1==e.status?a("span",{on:{click:function(a){return t.changeReceived(e,i)}}},[t._v("确认签收")]):a("div",[a("span",[t._v("已签收")]),a("van-icon",{attrs:{name:"delete",size:"16"},on:{click:function(a){return t.delorder(e.orderId,i)}}})],1)])]),t._l(t.allorderlist[i].products,(function(e,i){return a("div",{key:i,staticClass:"itembox-body"},[a("div",{staticClass:"elemtdata flexbetween"},[a("div",{staticClass:"imgandTxt flexbetween"},[a("div",{staticClass:"imgbox"},[a("img",{attrs:{src:e.smallImg,alt:""}})]),a("div",{staticClass:"Txtbox"},[a("strong",[t._v(t._s(e.name))]),a("p",[t._v(t._s(e.enname))]),a("p",[t._v(t._s(e.rule))])])]),a("div",{staticClass:"priceandNum"},[a("div",{staticClass:"price"},[a("strong",[t._v("￥"+t._s(e.price))])]),a("div",{staticClass:"num"},[a("span",[t._v("X"+t._s(e.count))])])])])])})),a("div",{staticClass:"itembox-foot flexbetween"},[a("div",{staticClass:"timebox"},[a("span",[t._v(t._s(t._f("formatDate")(e.date,"yyyy-MM-dd hh:mm:ss")))])]),a("div",{staticClass:"allprice"},[a("span",[t._v(" 共计 "),a("strong",[t._v(t._s(e.count))]),t._v("件商品 ")]),a("span",[t._v("合计")]),a("strong",[t._v("￥"+t._s(e.total))])])]),a("div",{staticClass:"anotheronebox"},[a("p",{on:{click:function(e){return t.anotherone(i)}}},[t._v("再来一单")])])],2)])})),0):a("div",{staticClass:"konbox"},[a("van-empty",{attrs:{description:"空空如也"}},[a("van-button",{staticClass:"bottom-button",attrs:{round:"",type:"danger",color:"#3a63f1"},on:{click:t.gohome}},[t._v("去加购吧!")])],1)],1)])})),1)],1)])])},r=[],n=(a("d81d"),a("a434"),a("be7a"),a("2f14")),o={data:function(){return{activeindex:0,allorderlist:[],titlelist:["全部","待签收","已签收"]}},created:function(){this.getorderData(0)},methods:{goback:function(){this.$router.push({name:"My"})},getorderData:function(t){var e=this,a=localStorage.getItem("CSTK");if(!a)return this.$router.push("/login");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:a,status:t}}).then((function(t){if(e.$toast.clear(),7e4==t.data.code){var a={};for(var i in e.allorderlist=[],t.data.result.map((function(t){a[t.oid]?(a[t.oid].count+=t.count,a[t.oid].total+=t.count*t.price,a[t.oid].products.push(t)):a[t.oid]={orderId:t.oid,date:t.createdAt,count:t.count,total:t.count*t.price,products:[t],status:t.status}})),a)e.allorderlist.push(a[i]);e.allorderlist.sort((function(t,e){return new Date(e.date).getTime()-new Date(t.date).getTime()}))}})).catch((function(t){e.$toast.clear()}))},changeReceived:function(t,e){var a=this,i=localStorage.getItem("CSTK");if(!i)return this.$router.push("/login");var r=n["a"].queryString({appkey:this.appkey,tokenString:i,oid:t.orderId});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/receive",data:r}).then((function(i){a.$toast.clear(),8e4==i.data.code&&(a.$toast(i.data.msg),1==a.activeindex?a.allorderlist.splice(e,1):t.status=2)})).catch((function(t){a.$toast.clear()}))},delorder:function(t,e){var a=this,i=localStorage.getItem("CSTK");if(!i)return this.$router.push("/login");var r=n["a"].queryString({appkey:this.appkey,tokenString:i,oid:t});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/removeOrder",data:r}).then((function(t){a.$toast.clear(),9e4==t.data.code&&(a.$toast(t.data.msg),a.allorderlist.splice(e,1))})).catch((function(t){a.$toast.clear()}))},toggleStatus:function(t){this.getorderData(t)},gohome:function(){this.$router.push("/main")},anotherone:function(t){var e=this,a=this.allorderlist[t].products[0],i=localStorage.getItem("CSTK");if(!i)return this.$router.push({name:"Login"});var r=n["a"].queryString({appkey:this.appkey,tokenString:i,pid:a.pid,count:a.count,rule:a.rule});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"post",url:"/addShopcart",data:r}).then((function(t){e.$toast.clear(),3e3==t.data.code&&e.$router.push({name:"Pay",query:{sids:t.data.sid}})})).catch((function(t){}))}}},s=o,c=a("2877"),d=Object(c["a"])(s,i,r,!1,null,"44af3324",null);e["default"]=d.exports},d4ec:function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return i}))},d81d:function(t,e,a){"use strict";var i=a("23e7"),r=a("b727").map,n=a("1dde"),o=a("ae40"),s=n("map"),c=o("map");i({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(t,e,a){"use strict";var i=a("23e7"),r=a("861d"),n=a("e8b5"),o=a("23cb"),s=a("50c4"),c=a("fc6a"),d=a("8418"),l=a("b622"),u=a("1dde"),f=a("ae40"),p=u("slice"),v=f("slice",{ACCESSORS:!0,0:0,1:2}),h=l("species"),g=[].slice,m=Math.max;i({target:"Array",proto:!0,forced:!p||!v},{slice:function(t,e){var a,i,l,u=c(this),f=s(u.length),p=o(t,f),v=o(void 0===e?f:e,f);if(n(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[h],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(u,p,v);for(i=new(void 0===a?Array:a)(m(v-p,0)),l=0;p<v;p++,l++)p in u&&d(i,l,u[p]);return i.length=l,i}})}}]);
//# sourceMappingURL=chunk-9b2fc290.bfbba859.js.map